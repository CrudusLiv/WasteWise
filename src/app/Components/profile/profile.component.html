<div class="profile-container">
  <mat-card>
    <mat-progress-bar *ngIf="loading" mode="indeterminate"></mat-progress-bar>

    <div class="profile-header">
      <div class="profile-avatar" role="img" aria-label="User profile avatar">
        <img *ngIf="profileImageUrl" [src]="profileImageUrl" alt="Profile Picture">
        <mat-icon *ngIf="!profileImageUrl" class="avatar-icon" aria-hidden="true">account_circle</mat-icon>
        <input type="file" #fileInput (change)="onFileSelected($event)" style="display: none;">
        <button (click)="fileInput.click()">Upload Profile Picture</button>
      </div>
    </div>

    <div class="profile-details">
      <div class="user-info-header">
        <h1 class="user-name">{{user.fullName}}</h1>
        <p class="username">{{'@' + user.username}}</p>
      </div>

      <mat-list>
        <mat-list-item>
          <mat-icon matListItemIcon>phone</mat-icon>
          <span matListItemTitle>Phone</span>
          <span matListItemLine>{{user.phoneNumber}}</span>
        </mat-list-item>

        <mat-list-item>
          <mat-icon matListItemIcon>home</mat-icon>
          <span matListItemTitle>Address</span>
          <span matListItemLine>{{getFormattedAddress()}}</span>
        </mat-list-item>

        <mat-list-item>
          <mat-icon matListItemIcon>apartment</mat-icon>
          <span matListItemTitle>Residence Info</span>
          <span matListItemLine>{{getResidenceInfo()}}</span>
        </mat-list-item>

        <mat-list-item>
          <mat-icon matListItemIcon>schedule</mat-icon>
          <span matListItemTitle>Preferred Pickup Time</span>
          <span matListItemLine>{{getPickupTimeLabel()}}</span>
        </mat-list-item>
      </mat-list>

      <div class="profile-actions">
        <button mat-raised-button color="primary" (click)="onEditProfile()">
          <mat-icon>edit</mat-icon>
          Edit Profile
        </button>
      </div>
    </div>
  </mat-card>
</div>